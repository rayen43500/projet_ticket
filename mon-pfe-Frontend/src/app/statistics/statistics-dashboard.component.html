<div class="statistics-container">
  <h1 class="main-title">Tableau de Bord Statistique</h1>
  
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Chargement des statistiques...</p>
  </div>
  
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>
  
  <div *ngIf="!loading && !error" class="dashboard-content">
    <!-- Statistiques globales -->
    <div class="stats-card global-stats">
      <h2>Statistiques globales</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">{{ globalStats.total }}</div>
          <div class="stat-label">Total des tickets</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ globalStats.enAttente }}</div>
          <div class="stat-label">En attente</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ globalStats.enCours }}</div>
          <div class="stat-label">En cours</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ globalStats.traites }}</div>
          <div class="stat-label">Traités</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ globalStats.clotures }}</div>
          <div class="stat-label">Clôturés</div>
        </div>
      </div>
    </div>
    
    <!-- Tickets par projet (barchart) -->
    <div class="stats-card">
      <h2>Nombre de tickets par projet</h2>
      <div class="chart-container">
        <canvas baseChart
          [type]="barChartType"
          [datasets]="projectBarChartData.datasets"
          [labels]="projectBarChartData.labels"
          [options]="barChartOptions"
          [legend]="true">
        </canvas>
      </div>
    </div>
    
    <!-- Tickets par urgence (piechart) -->
    <div class="stats-card">
      <h2>Distribution par priorité</h2>
      <div class="chart-container">
        <canvas baseChart
          [type]="pieChartType"
          [datasets]="urgencyPieChartData.datasets"
          [labels]="urgencyPieChartData.labels"
          [options]="pieChartOptions"
          [legend]="true">
        </canvas>
      </div>
    </div>
    

    
   
  </div>
</div> 