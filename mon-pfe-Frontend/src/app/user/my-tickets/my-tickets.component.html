<!-- Overlay plein écran pour le formulaire -->
<div class="form-overlay" *ngIf="selectedTicket">
  <!-- Bouton pour fermer -->
  <button class="close-button" (click)="closeForm()">×</button>

  <div class="tickets-container">
    <h2>Mes Tickets</h2>
  
    <!-- Liste des tickets -->
    <ul class="tickets-list">
      <li *ngFor="let ticket of tickets" class="ticket-card" (click)="selectTicket(ticket)">
        <div class="ticket-header">
          <h3>{{ ticket.sujet }}</h3>
          <p class="ticket-status">{{ ticket.statut }}</p>
        </div>
        <p class="ticket-description">{{ ticket.description }}</p>
        <div class="ticket-footer">
          <span class="ticket-priority">Priorité: {{ ticket.urgence }}</span>
        </div>
      </li>
    </ul>
  
    <!-- Overlay plein écran pour le formulaire -->
    <div class="form-overlay" *ngIf="selectedTicket">
      <!-- Bouton pour fermer -->
      <button class="close-button" (click)="closeForm()">×</button>
  
      <div class="create-ticket-container">
        <div class="ticket-card">
          <h1>Créer un Nouveau Ticket</h1>
          <form (ngSubmit)="onSubmit()" class="ticket-form">
            <!-- Sujet du ticket -->
            <div class="form-group">
              <label for="subject">Sujet</label>
              <div class="input-icon">
                <i class="material-icons">title</i>
                <input
                  type="text"
                  id="subject"
                  name="subject"
                  placeholder="Entrez le sujet de votre ticket"
                  [(ngModel)]="ticket.sujet"
                  required
                />
              </div>
            </div>
      
            <!-- Description du ticket -->
            <div class="form-group">
              <label for="description">Description</label>
              <div class="textarea-container">
                <textarea
                  id="description"
                  name="description"
                  placeholder="Décrivez votre problème ou demande"
                  [(ngModel)]="ticket.description"
                  required
                ></textarea>
              </div>
            </div>
      
            <!-- Degré d'urgence -->
            <div class="form-group">
              <label for="priority">Priorité</label>
              <div class="input-icon">
                <i class="material-icons">priority_high</i>
                <select
                  id="priority"
                  name="priority"
                  [(ngModel)]="ticket.urgence"
                  required
                >
                  <option value="FAIBLE">Faible</option>
                  <option value="MOYENNE">Moyenne</option>
                  <option value="HAUTE">Élevée</option>
                </select>
              </div>
            </div>
      
            <!-- Type d'intervention -->
            <div class="form-group">
              <label for="type">Type d'Intervention</label>
              <div class="input-icon">
                <i class="material-icons">category</i>
                <select
                  id="type"
                  name="type"
                  [(ngModel)]="ticket.type"
                  required
                >
                  <option value="incident">Incident</option>
                  <option value="request">Demande</option>
                  <option value="assistance">Assistance</option>
                </select>
              </div>
            </div>
      
            <!-- Groupe et sous-groupe -->
            <div class="form-group">
              <label for="group">Groupe</label>
              <div class="input-icon">
                <i class="material-icons">group_work</i>
                <select
                  id="group"
                  name="group"
                  [(ngModel)]="ticket.groupeNom"
                  required
                >
                  <option value="Finance">Finance</option>
                  <option value="Informatique">Informatique</option>
                  <option value="Ressources Humaines">Ressources Humaines</option>
                </select>
              </div>
            </div>
      
            <div class="form-group">
              <label for="subgroup">Sous-groupe</label>
              <div class="input-icon">
                <i class="material-icons">layers</i>
                <select
                  id="subgroup"
                  name="subgroup"
                  [(ngModel)]="ticket.sousGroupeNom"
                  required
                >
                  <option value="Comptabilité">Comptabilité</option>
                  <option value="Réseau">Réseau</option>
                  <option value="Paie">Paie</option>
                </select>
              </div>
            </div>
      
            <!-- Pièces jointes -->
            <div class="form-group">
              <label for="attachments">Pièces jointes</label>
              <div class="file-upload">
                <label for="attachments">
                  <i class="material-icons">attach_file</i>
                  <span>Choisir des fichiers</span>
                  <input
                    type="file"
                    id="attachments"
                    name="attachments"
                    (change)="onFileChange($event)"
                    multiple
                  />
                </label>
              </div>
            </div>
      
            <!-- Bouton de soumission -->
            <button type="submit" class="submit-button">
              <i class="material-icons">send</i>
              <span>Créer un Ticket</span>
            </button>
          </form>
        </div>
      </div>
      
      <app-edit-ticket-form [ticket]="selectedTicket"></app-edit-ticket-form>
    </div>
  </div>
